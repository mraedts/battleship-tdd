!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const i=n(1),r=n(2),s=(i.Ship,i.GameBoard),o=i.Player;(()=>{let e=[s("human"),s("ai")],t=[o("human"),o("ai")];const n=document.querySelector("#winner-text"),i=document.querySelector("#clear-board-button"),l=document.querySelector("#button-wrapper"),a=document.querySelector("#friendly-ships-sunk"),d=document.querySelector("#enemy-ships-sunk"),c=document.querySelector("#pieces-container"),u=document.querySelector("#rotate-text"),p={numPlacedShips:0,aiFinishedTurn:!0,hasStarted:!1,hasFinished:!1};e[1].placeShipsDefault(),i.addEventListener("click",t=>{e[0]=s("human"),y()}),l.addEventListener("click",()=>h());const h=()=>{a.style.display="none",d.style.visibility="hidden",n.style.visibility="hidden",l.style.visibility="hidden",c.style.display="block",i.style.display="block",p.numPlacedShips=0,p.aiFinishedTurn=!0,p.hasStarted=!1,p.hasFinished=!1,document.querySelector("#friendly-ships-sunk-num").textContent=0,document.querySelector("#enemy-ships-sunk-num").textContent=0,e[0]=s("human"),e[1]=s("ai"),t[0]=o("human"),t[1]=o("ai"),e[1].placeShipsDefault(),y(),m()},f=n=>{n.addEventListener("dragover",e=>{console.log(e.target.dataset.pos),e.preventDefault()});n.addEventListener("drop",n=>{n.preventDefault();const r=Number(n.target.dataset.pos),s=((e,n,i)=>{const r=i[0].shipLengths[i[0].shipNumToPlace],s=t[0].lastPieceIndex;let o=s-1,l=[],a=1;e&&(a=10);for(let e=1;e<=r;e++)e<s?(l.push(n-o*a),o--):e==s?(l.push(n),o=1):(l.push(n+o*a),o++);return console.log(l),l})(JSON.parse(n.dataTransfer.getData("text")),r,e);if(0!=e[0].addShip(s)){if(9==e[0].shipNumToPlace){document.querySelectorAll(".grid-div-enemy").forEach(e=>{e.style.backgroundColor="white"}),p.hasStarted=!0,c.style.display="none",a.style.display="block",d.style.visibility="visible",u.style.visibility="hidden",i.style.display="none"}e[0].shipNumToPlace++,y()}})};function y(){const n=e[0];r.renderPlayerBoardDivs(n),document.querySelectorAll(".grid-div-friendly").forEach(e=>{f(e)}),r.renderPiecesToPlace(t,e)}function m(){r.renderAIBoard(e,p.hasStarted);const i=document.querySelectorAll(".grid-div-enemy"),s=document.querySelector("#friendly-ships-sunk-num"),o=document.querySelector("#enemy-ships-sunk-num");i.forEach(i=>{const r=i.dataset.pos;i.addEventListener("click",()=>{if(p.hasStarted&&p.aiFinishedTurn&&0==p.hasFinished){if(p.aiFinishedTurn=!1,0==t[0].attack(e[1],r))return p.aiFinishedTurn=!0,void m();m(),10==e[1].getSunkenShipNumber()&&(n.textContent="You won!",n.style.visibility="visible",p.hasFinished=!0,l.style.visibility="visible"),o.textContent=e[1].getSunkenShipNumber(),setTimeout(()=>{t[1].aiAttack(e[0]),y(),10==e[0].getSunkenShipNumber()&&(n.textContent="Computer won!",n.style.visibility="visible",p.hasFinished=!0,l.style.visibility="visible"),s.textContent=e[0].getSunkenShipNumber(),p.aiFinishedTurn=!0},300)}})})}m(),y()})()},function(e,t){const n=()=>{let e=[];return{isSunk:()=>{let t=0;for(let n=0;n<e.length;n++)1==e[n].isHit&&t++;return!(t<e.length)},hit:t=>{e.forEach(e=>{t==e.position&&(e.isHit=!0)})},setPositions:t=>{t.forEach(t=>{e.push({position:t,isHit:!1})})},positions:e}};e.exports={Ship:n,GameBoard:e=>{this.playerType=e;let t=[],i=[],r=[2,2,2,2,3,3,3,4,4,5];const s=e=>{if((()=>{let n=[];t.forEach(e=>{e.positions.forEach(e=>{n.push(e.position)})});for(let t=0;t<e.length;t++)if(n.includes(e[t]))return!0;return!1})()||(()=>{for(let t=10;t<=90;t){if(e.includes(t)&&e.includes(t+1))return!0;t+=10}return!1})()||(()=>{e[1],e[0];let t=[e[0]],n=[e[0]];for(let n=1;n<=e.length-1;n++)t.push(t[t.length-1]+10);for(let t=1;t<=e.length-1;t++)n.push(n[n.length-1]+1);let i=!0,r=!0;for(let n=0;n<e.length;n++)e[n]!=t[n]&&(i=!1);for(let t=0;t<e.length;t++)e[t]!=n[t]&&(r=!1);return!i&&!r})()||(()=>{for(let t=0;t<e.length;t++)if(e[t]<1||e[t]>100)return!0})())return!1;const i=n();return i.setPositions(e),t.push(i),!0};return{getPlayerType:()=>e,addShip:s,ships:t,receiveAttack:e=>{let n=!0;t.forEach(t=>{t.positions.forEach(i=>{i.position==e&&(t.hit(e),n=!1)})}),n&&i.push(e)},missedAttackPositions:i,checkIfAllShipsSunk:()=>{let e=0,n=0;return t.forEach(t=>{t.positions.forEach(t=>{e++,1==t.isHit&&n++})}),e==n},placeShipsDefault:()=>{"ai"==e?(()=>{const e=t=>{let n=[Math.floor(100*Math.random()+1)];if(Math.random()<.5)for(let e=0;e<t-1;e++)n.push(n[n.length-1]+1);else for(let e=0;e<t-1;e++)n.push(n[n.length-1]+10);s(n)||e(t)};r.forEach(t=>{e(t)})})():(s([2,12]),s([90,100]),s([82,83]),s([6,7]),s([85,86,87]),s([9,19,29]),s([41,51,61]),s([33,34,35,36]),s([49,59,69,79]),s([63,64,65,66,67]))},getSunkenShipNumber:()=>{let e=0;return t.forEach(t=>{t.isSunk()&&e++}),e},shipNumToPlace:0,shipLengths:r}},Player:e=>{let t=[];const n=i=>{if("human"==e)return;let r=Math.floor(100*Math.random()+1);t.includes(r)?n(i):(i.receiveAttack(r),t.push(r))};return{attack:(e,n)=>{if(t.includes(n))return!1;e.receiveAttack(n),t.push(n)},previousAttackPositions:t,aiAttack:n,lastPieceHoverIndex:void 0}}}},function(e,t){const n=["#badaf7","#091476","#5ea9ed","#3090e8","#1776cf","#125ca1","#0d4273","#082745","#1f6b93","#1025d5"],i=(e,t)=>{if(e.includes(t)){if(e.indexOf(t)<2)return n[0];if(e.indexOf(t)<4)return n[1];if(e.indexOf(t)<6)return n[2];if(e.indexOf(t)<8)return n[3];if(e.indexOf(t)<11)return n[4];if(e.indexOf(t)<14)return n[5];if(e.indexOf(t)<17)return n[6];if(e.indexOf(t)<21)return n[7];if(e.indexOf(t)<25)return n[8];if(e.indexOf(t)<30)return n[9]}};e.exports={renderAIBoard:(e,t)=>{const n=document.querySelectorAll(".gameboard-grid")[1],i=e[1];console.log(e[1].missedAttackPositions);n.innerHTML="";const r=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{t.isHit&&e.push(t.position)})}),e},s=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{e.push(t.position)})}),e};for(let i=1;i<=100;i++){const o=r(),l=(s(),document.createElement("div"));if(l.dataset.pos=i,l.classList.add("grid-div-enemy"),1!=i&&i%10!=1||(l.style.borderLeftColor="grey"),i<=10&&(l.style.borderTopColor="grey"),e[1].missedAttackPositions.includes(i.toString())){l.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",l.appendChild(e)}else if(o.includes(i)){l.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",l.appendChild(e)}else 1==t&&(l.backgroundColor="white");console.log(t),n.appendChild(l),l.backgroundColor="white"}},renderPlayerBoardDivs:(e,t)=>{const n=document.querySelectorAll(".gameboard-grid")[0];n.innerHTML="";const r=()=>{let t=[];return e.ships.forEach(e=>{e.positions.forEach(e=>{e.isHit&&t.push(e.position)})}),t},s=()=>{let t=[];return e.ships.forEach(e=>{e.positions.forEach(e=>{t.push(e.position)})}),t};for(let t=1;t<=100;t++){const o=r(),l=s(),a=document.createElement("div");if(a.dataset.pos=t,a.classList.add("grid-div-friendly"),1!=t&&t%10!=1||(a.style.borderLeftColor="grey"),t<=10&&(a.style.borderTopColor="grey"),a.style.backgroundColor=i(l,t),e.missedAttackPositions.includes(t)){a.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",a.appendChild(e)}else if(o.includes(t)){a.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",a.appendChild(e)}n.appendChild(a)}},renderPiecesToPlace:(e,t)=>{const i=t[0].shipLengths[t[0].shipNumToPlace],r=document.querySelector("#pieces-container");r.innerHTML="";const s=((e,t,i)=>{const r=document.createElement("div");r.id="piece-grid",r.style.position="absolute",r.setAttribute("draggable",!0),r.style.width=`${45*e}px`,r.style.gridTemplateColumns=`repeat(${e}, 1fr)`;for(let s=0;s<e;s++){const e=document.createElement("div");e.dataset.index=s+1,e.id="regular-block",e.classList.add("block"),e.style.backgroundColor=n[i],e.addEventListener("mouseover",e=>{console.log(e.target.dataset.index),t[0].lastPieceIndex=e.target.dataset.index,console.log(`index: ${t[0].lastPieceIndex}`)}),r.appendChild(e)}return r})(i,e,t[0].shipNumToPlace),o=["83px","60px","38px","16px"];switch(i){case 2:s.style.marginLeft=o[0];break;case 3:s.style.marginLeft=o[1];break;case 4:s.style.marginLeft=o[2];break;case 5:s.style.marginLeft=o[3]}s.addEventListener("click",e=>{e.target.parentNode.classList.toggle("vertical")}),s.addEventListener("dragstart",e=>{e.dataTransfer.setData("text",`${e.target.classList.contains("vertical")}`)}),r.appendChild(s)}}}]);