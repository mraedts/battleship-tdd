!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const i=n(1),r=n(2),s=(i.Ship,i.GameBoard),o=i.Player;(()=>{let e=[s("human"),s("ai")],t=[o("human"),o("ai")];const n={numPlacedShips:0,aiFinishedTurn:!0,hasStarted:!1,hasFinished:!1};e[1].placeShipsDefault();const i=document.querySelector("#clear-board-button");i.addEventListener("click",t=>{e[0]=s("human"),l()});const d=r=>{r.addEventListener("dragover",e=>{console.log(e.target.dataset.pos),e.preventDefault()});r.addEventListener("drop",r=>{r.preventDefault();const s=Number(r.target.dataset.pos),o=JSON.parse(r.dataTransfer.getData("text")),d=document.querySelector("#friendly-ships-sunk"),a=document.querySelector("#enemy-ships-sunk"),c=((e,n,i)=>{const r=i[0].shipLengths[i[0].shipNumToPlace],s=t[0].lastPieceIndex;let o=s-1,d=[],l=1;e&&(l=10);for(let e=1;e<=r;e++)e<s?(d.push(n-o*l),o--):e==s?(d.push(n),o=1):(d.push(n+o*l),o++);return console.log(d),d})(o,s,e);if(0!=e[0].addShip(c)){if(9==e[0].shipNumToPlace){const e=document.querySelector("#pieces-container");document.querySelectorAll(".grid-div-enemy").forEach(e=>{e.style.backgroundColor="white"}),n.hasStarted=!0,e.style.display="none",d.style.display="block",a.style.visibility="visible",console.log(n.hasStarted),i.style.display="none"}e[0].shipNumToPlace++,l()}})};function l(){const n=e[0];r.renderPlayerBoardDivs(n),document.querySelectorAll(".grid-div-friendly").forEach(e=>{d(e)}),r.renderPiecesToPlace(t,e)}!function i(){r.renderAIBoard(e,n.hasStarted);const s=document.querySelectorAll(".grid-div-enemy"),o=document.querySelector("#friendly-ships-sunk-num"),d=document.querySelector("#enemy-ships-sunk-num");s.forEach(r=>{const s=r.dataset.pos;r.addEventListener("click",()=>{if(n.hasStarted&&n.aiFinishedTurn){if(n.aiFinishedTurn=!1,0==t[0].attack(e[1],s))return n.aiFinishedTurn=!0,void i();i(),d.textContent=e[1].getSunkenShipNumber(),setTimeout(()=>{t[1].aiAttack(e[0]),l(),o.textContent=e[0].getSunkenShipNumber(),n.aiFinishedTurn=!0},600)}})})}(),l()})()},function(e,t){const n=()=>{let e=[];return{isSunk:()=>{let t=0;for(let n=0;n<e.length;n++)1==e[n].isHit&&t++;return!(t<e.length)},hit:t=>{e.forEach(e=>{t==e.position&&(e.isHit=!0)})},setPositions:t=>{t.forEach(t=>{e.push({position:t,isHit:!1})})},positions:e}};e.exports={Ship:n,GameBoard:e=>{this.playerType=e;let t=[],i=[],r=[2,2,2,2,3,3,3,4,4,5];const s=e=>{if((()=>{let n=[];t.forEach(e=>{e.positions.forEach(e=>{n.push(e.position)})});for(let t=0;t<e.length;t++)if(n.includes(e[t]))return!0;return!1})()||(()=>{for(let t=10;t<=90;t){if(e.includes(t)&&e.includes(t+1))return!0;t+=10}return!1})()||(()=>{e[1],e[0];let t=[e[0]],n=[e[0]];for(let n=1;n<=e.length-1;n++)t.push(t[t.length-1]+10);for(let t=1;t<=e.length-1;t++)n.push(n[n.length-1]+1);let i=!0,r=!0;for(let n=0;n<e.length;n++)e[n]!=t[n]&&(i=!1);for(let t=0;t<e.length;t++)e[t]!=n[t]&&(r=!1);return!i&&!r})()||(()=>{for(let t=0;t<e.length;t++)if(e[t]<1||e[t]>100)return!0})())return!1;const i=n();return i.setPositions(e),t.push(i),!0};return{getPlayerType:()=>e,addShip:s,ships:t,receiveAttack:e=>{let n=!0;t.forEach(t=>{t.positions.forEach(i=>{i.position==e&&(t.hit(e),n=!1)})}),n&&i.push(e)},missedAttackPositions:i,checkIfAllShipsSunk:()=>{let e=0,n=0;return t.forEach(t=>{t.positions.forEach(t=>{e++,1==t.isHit&&n++})}),e==n},placeShipsDefault:()=>{"ai"==e?(()=>{const e=t=>{let n=[Math.floor(100*Math.random()+1)];if(Math.random()<.5)for(let e=0;e<t-1;e++)n.push(n[n.length-1]+1);else for(let e=0;e<t-1;e++)n.push(n[n.length-1]+10);s(n)||e(t)};r.forEach(t=>{e(t)})})():(s([2,12]),s([90,100]),s([82,83]),s([6,7]),s([85,86,87]),s([9,19,29]),s([41,51,61]),s([33,34,35,36]),s([49,59,69,79]),s([63,64,65,66,67]))},getSunkenShipNumber:()=>{let e=0;return t.forEach(t=>{t.isSunk()&&e++}),e},shipNumToPlace:0,shipLengths:r}},Player:e=>{let t=[];const n=i=>{if("human"==e)return;let r=Math.floor(100*Math.random()+1);t.includes(r)?n(i):(i.receiveAttack(r),t.push(r))};return{attack:(e,n)=>{if(t.includes(n))return!1;e.receiveAttack(n),t.push(n)},previousAttackPositions:t,aiAttack:n,lastPieceHoverIndex:void 0}}}},function(e,t){const n=(e,t)=>{const n=t[0].shipLengths[t[0].shipNumToPlace],i=document.querySelector("#pieces-container");i.innerHTML="";const r=((e,t,n)=>{const i=["#badaf7","#091476","#5ea9ed","#3090e8","#1776cf","#125ca1","#0d4273","#082745","#1f6b93","#1025d5"],r=document.createElement("div");r.id="piece-grid",r.style.position="absolute",r.setAttribute("draggable",!0),r.style.width=`${45*e}px`,r.style.gridTemplateColumns=`repeat(${e}, 1fr)`;for(let s=0;s<e;s++){const e=document.createElement("div");e.dataset.index=s+1,e.id="regular-block",e.classList.add("block"),e.style.backgroundColor=i[n],e.addEventListener("mouseover",e=>{console.log(e.target.dataset.index),t[0].lastPieceIndex=e.target.dataset.index,console.log(`index: ${t[0].lastPieceIndex}`)}),r.appendChild(e)}return r})(n,e,t[0].shipNumToPlace),s=["83px","60px","38px","16px"];switch(n){case 2:r.style.marginLeft=s[0];break;case 3:r.style.marginLeft=s[1];break;case 4:r.style.marginLeft=s[2];break;case 5:r.style.marginLeft=s[3]}r.addEventListener("click",e=>{e.target.parentNode.classList.toggle("vertical")}),r.addEventListener("dragstart",e=>{e.dataTransfer.setData("text",`${e.target.classList.contains("vertical")}`)}),i.appendChild(r)};e.exports={renderAIBoard:(e,t)=>{const n=document.querySelectorAll(".gameboard-grid")[1],i=e[1];console.log(e[1].missedAttackPositions);const r=["#badaf7","#091476","#5ea9ed","#3090e8","#1776cf","#125ca1","#0d4273","#082745","#1f6b93","#1025d5"],s=(e,t)=>{if(e.includes(t)){if(e.indexOf(t)<2)return r[0];if(e.indexOf(t)<4)return r[1];if(e.indexOf(t)<6)return r[2];if(e.indexOf(t)<8)return r[3];if(e.indexOf(t)<11)return r[4];if(e.indexOf(t)<14)return r[5];if(e.indexOf(t)<17)return r[6];if(e.indexOf(t)<21)return r[7];if(e.indexOf(t)<25)return r[8];if(e.indexOf(t)<30)return r[9]}};n.innerHTML="";const o=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{t.isHit&&e.push(t.position)})}),e},d=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{e.push(t.position)})}),e};for(let i=1;i<=100;i++){const r=o(),l=d(),a=document.createElement("div");if(a.dataset.pos=i,a.classList.add("grid-div-enemy"),a.style.backgroundColor=s(l,i),1!=i&&i%10!=1||(a.style.borderLeftColor="grey"),i<=10&&(a.style.borderTopColor="grey"),e[1].missedAttackPositions.includes(i.toString())){a.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",a.appendChild(e)}else if(r.includes(i)){a.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",a.appendChild(e)}else 1==t&&(a.backgroundColor="white");console.log(t),n.appendChild(a),a.backgroundColor="white"}},renderGridDivs:(e,t,i,r)=>{const s=document.querySelectorAll(".gameboard-grid"),o=["#badaf7","#091476","#5ea9ed","#3090e8","#1776cf","#125ca1","#0d4273","#082745","#1f6b93","#1025d5"];s.forEach(e=>{e.innerHTML=""});const d=(e,t)=>{if(e.includes(t)){if(e.indexOf(t)<2)return o[0];if(e.indexOf(t)<4)return o[1];if(e.indexOf(t)<6)return o[2];if(e.indexOf(t)<8)return o[3];if(e.indexOf(t)<11)return o[4];if(e.indexOf(t)<14)return o[5];if(e.indexOf(t)<17)return o[6];if(e.indexOf(t)<21)return o[7];if(e.indexOf(t)<25)return o[8];if(e.indexOf(t)<30)return o[9]}},l=()=>{const t=s[0],r=e[0];t.innerHTML="";const o=()=>{let e=[];return r.ships.forEach(t=>{t.positions.forEach(t=>{t.isHit&&e.push(t.position)})}),e},a=()=>{let e=[];return r.ships.forEach(t=>{t.positions.forEach(t=>{e.push(t.position)})}),e};for(let s=1;s<=100;s++){const c=o(),u=a(),p=document.createElement("div");if(p.dataset.pos=s,p.classList.add("grid-div"),1!=s&&s%10!=1||(p.style.borderLeftColor="grey"),s<=10&&(p.style.borderTopColor="grey"),p.style.backgroundColor=d(u,s),r.missedAttackPositions.includes(s)){p.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",p.appendChild(e)}else if(c.includes(s)){p.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",p.appendChild(e)}(()=>{p.addEventListener("dragover",e=>{e.preventDefault()});p.addEventListener("drop",t=>{t.preventDefault();const r=Number(t.target.dataset.pos),s=JSON.parse(t.dataTransfer.getData("text")),o=document.querySelector("#friendly-ships-sunk"),d=document.querySelector("#enemy-ships-sunk"),a=((t,n)=>{const r=e[0].shipLengths[e[0].shipNumToPlace],s=i[0].lastPieceIndex;let o=s-1,d=[],l=1;t&&(l=10);for(let e=1;e<=r;e++)e<s?(d.push(n-o*l),o--):e==s?(d.push(n),o=1):(d.push(n+o*l),o++);return console.log(d),d})(s,r);if(0!=e[0].addShip(a)){if(9==e[0].shipNumToPlace){const e=document.querySelector("#pieces-container");gameHasStarted=9,e.style.display="none",o.style.display="block",d.style.visibility="visible"}e[0].shipNumToPlace++,n(i,e)}l()}),t.appendChild(p)})(),t.appendChild(p)}};(()=>{const t=document.querySelector("#friendly-ships-sunk"),n=document.querySelector("#enemy-ships-sunk");t.textContent=`Friendly ships sunk: ${e[0].getSunkenShipNumber()}`,n.textContent=`Enemy ships sunk: ${e[1].getSunkenShipNumber()}`})(),l(),(()=>{const n=s[1],i=e[1];n.innerHTML="";const r=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{t.isHit&&e.push(t.position)})}),e},o=()=>{let e=[];return i.ships.forEach(t=>{t.positions.forEach(t=>{e.push(t.position)})}),e};for(let e=1;e<=100;e++){const s=r(),l=o(),a=document.createElement("div");if(a.dataset.pos=e,a.classList.add("grid-div"),a.style.backgroundColor=d(l,e),1!=e&&e%10!=1||(a.style.borderLeftColor="grey"),e<=10&&(a.style.borderTopColor="grey"),i.missedAttackPositions.includes(e)){a.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",a.appendChild(e)}else if(s.includes(e)){a.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",a.appendChild(e)}else a.addEventListener("click",()=>{t(e)});n.appendChild(a)}})(),n(i,e)},renderPlayerBoardDivs:(e,t)=>{const n=document.querySelectorAll(".gameboard-grid")[0],i=["#badaf7","#091476","#5ea9ed","#3090e8","#1776cf","#125ca1","#0d4273","#082745","#1f6b93","#1025d5"],r=(e,t)=>{if(e.includes(t)){if(e.indexOf(t)<2)return i[0];if(e.indexOf(t)<4)return i[1];if(e.indexOf(t)<6)return i[2];if(e.indexOf(t)<8)return i[3];if(e.indexOf(t)<11)return i[4];if(e.indexOf(t)<14)return i[5];if(e.indexOf(t)<17)return i[6];if(e.indexOf(t)<21)return i[7];if(e.indexOf(t)<25)return i[8];if(e.indexOf(t)<30)return i[9]}};n.innerHTML="";const s=()=>{let t=[];return e.ships.forEach(e=>{e.positions.forEach(e=>{e.isHit&&t.push(e.position)})}),t},o=()=>{let t=[];return e.ships.forEach(e=>{e.positions.forEach(e=>{t.push(e.position)})}),t};for(let t=1;t<=100;t++){const i=s(),d=o(),l=document.createElement("div");if(l.dataset.pos=t,l.classList.add("grid-div-friendly"),1!=t&&t%10!=1||(l.style.borderLeftColor="grey"),t<=10&&(l.style.borderTopColor="grey"),l.style.backgroundColor=r(d,t),e.missedAttackPositions.includes(t)){l.textContent="";const e=document.createElement("img");e.src="./img/miss.png",e.style.height="35px",e.style.width="35px",e.style.paddingTop="7px",l.appendChild(e)}else if(i.includes(t)){l.textContent="";const e=document.createElement("img");e.src="./img/explosion.png",e.style.height="45px",e.style.width="45px",e.style.paddingTop="1px",l.appendChild(e)}n.appendChild(l)}},renderPiecesToPlace:n}}]);